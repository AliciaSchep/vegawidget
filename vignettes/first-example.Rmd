---
title: "First Example"
date: "`r Sys.Date()`"
output: rmarkdown::html_document
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r}
library("vegawidget")
library("magrittr")
library("tibble")
library("readr")
library("purrr")
```

Let's write a vega-lite spec!

Here's a JSON spec

```
{
  "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
  "description": "A simple bar chart with embedded data.",
  "data": {
    "values": [
      {"a": "A","b": 28}, {"a": "B","b": 55}, {"a": "C","b": 43},
      {"a": "D","b": 91}, {"a": "E","b": 81}, {"a": "F","b": 53},
      {"a": "G","b": 19}, {"a": "H","b": 87}, {"a": "I","b": 52}
    ]
  },
  "mark": "bar",
  "encoding": {
    "x": {"field": "a", "type": "ordinal"},
    "y": {"field": "b", "type": "quantitative"}
  }
}
```

```{r}
data_values <-
  list(
    list(a = "A", b = 28),
    list(a = "B", b = 55),
    list(a = "C", b = 43),
    list(a = "D", b = 91),
    list(a = "E", b = 81),
    list(a = "F", b = 53),
    list(a = "G", b = 19),
    list(a = "H", b = 87),
    list(a = "I", b = 52)
  )

data <- 
  data.frame(
    a = c("A", "B", "C", "D", "E", "F", "G", "H", "I"),
    b = c(28, 55, 43, 91, 81, 53, 19, 87, 52),
    stringsAsFactors = FALSE
  )

spec <- 
  list(
    `$schema` = "https://vega.github.io/schema/vega-lite/v2.json",
    description = "A simple bar chart with embedded data.",
    data = list(values = data_values),
    mark = "bar",
    encoding = list(
      x = list(field = "a", type = "ordinal"),
      y = list(field = "b", type = "quantitative")
    )
  )

vegawidget::vegawidget(spec)
```

```{r}
spec_named <- 
  list(
    `$schema` = "https://vega.github.io/schema/vega-lite/v2.json",
    description = "A simple bar chart with embedded data.",
    datasets = 
      list(
        sample = data_values
      ),
    data = list(name = "sample"),
    mark = "bar",
    encoding = list(
      x = list(field = "a", type = "ordinal"),
      y = list(field = "b", type = "quantitative")
    )
  )

vegawidget::vegawidget(spec_named)
```

Let's try to modify a spec that we create using a data-frame:

```{r}
spec_data_frame <- spec

spec_data_frame$data <- list(values = data)

vegawidget::vegawidget(spec_data_frame)
```

```{r}
spec_mtcars <-
  list(
    `$schema` = "https://vega.github.io/schema/vega-lite/v2.json",
    description = "An mtcars example.",
    data = list(values = mtcars),
    mark = "point",
    encoding = list(
      x = list(field = "wt", type = "quantitative"),
      y = list(field = "mpg", type = "quantitative"),
      color = list(field = "cyl", type = "nominal")
    )
  )  

vegawidget(spec_mtcars)
```
